<div class="form-page-container">
  <!-- Header avec logo et ligne - toute la largeur -->
  <div class="form-page-header-bar">
    <div class="form-page-logo-section">
      <img src="/assets/logo_p6.png" alt="MDD Logo" class="form-page-logo" />
    </div>
    <div class="form-page-divider"></div>
    <div class="form-page-back-button-section">
      <button mat-icon-button class="back-btn" (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
  </div>
  
  <!-- Contenu du formulaire - centré -->
  <div class="form-page-content-wrapper">
    <div class="form-page-content-section">
      <h2 class="form-page-title">Inscription</h2>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="form-page-form">
        <div class="form-page-field">
          <label for="username">Nom d'utilisateur</label>
          <input
            type="text"
            id="username"
            formControlName="username"
            class="form-page-input"
          />
        </div>

        <div class="form-page-field">
          <label for="email">Adresse e-mail</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-page-input"
          />
        </div>

        <div class="form-page-field">
          <label for="password">Mot de passe</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            class="form-page-input"
          />
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <div class="password-error-message">
              <p class="error-title">Le mot de passe ne respecte pas les critères de sécurité :</p>
              <ul class="error-list">
                @if (registerForm.get('password')?.hasError('minlength')) {
                  <li>X Doit contenir au moins 8 caractères</li>
                }
                @if (registerForm.get('password')?.hasError('passwordStrength') && !hasNumber()) {
                  <li>X Doit contenir au moins 1 chiffre</li>
                }
                @if (registerForm.get('password')?.hasError('passwordStrength') && !hasLowerCase()) {
                  <li>X Doit contenir au moins 1 lettre minuscule</li>
                }
                @if (registerForm.get('password')?.hasError('passwordStrength') && !hasUpperCase()) {
                  <li>X Doit contenir au moins 1 lettre majuscule</li>
                }
                @if (registerForm.get('password')?.hasError('passwordStrength') && !hasSpecialChar()) {
                  <li>X Doit contenir au moins 1 caractère spécial</li>
                }
              </ul>
              <p class="button-disabled-info">Le bouton S inscrire n est pas disponible car le mot de passe ne respecte pas les instructions de complexité.</p>
            </div>
          }
        </div>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="form-page-submit-button"
          [disabled]="!registerForm.valid">
          S'inscrire
        </button>
      </form>
    </div>
  </div>
</div>
